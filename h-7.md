# h6 Hash

Kone millä tein harjoituksen:

AMD Ryzen 2600X Six-Core Processor 3.6 ghz  

16gb RAM  

Windows 10 Pro 64-bit käyttöjärjestelmä  

Oracle VM VirtualBox Manager

##

Läksy löytyy sivulta:  

https://terokarvinen.com/2023/eettinen-hakkerointi-2023/  

## 

## x) Lue/katso/kuuntele ja tiivistä  

Karvinen 2022: Cracking Passwords with Hashcat  

https://terokarvinen.com/2022/cracking-passwords-with-hashcat/  

Artikkellissa kerrotaan miten salasanoja kräkätään Hashcat ohjelman avulla.  

- Salasanat muutetaan järjeslmissä hasheiksi esim  "fsd0fsdfwe09890e8f90we8f90" ja hashing avulla ne muutetaan takaisin normaaliin salasana muotoon "password123"
- Hashcat ohjelmat asennus `sudo apt-get -y install hashid hashcat wget`
- Ladataan salasana wordlisti esim "rockyou": `wget https://github.com/danielmiessler/SecLists/raw/master/Passwords/Leaked-Databases/rockyou.txt.tar.gz` `tar xf rockyou.txt.tar.gz`
- Hashcat tarvitsee tietää minkä tyyppisen hashin kräkätä, se selvitetetään hashid avulla, `$ hashid -m fsd0fsdfwe09890e8f90we8f90`
- Hashid:n kräkkääminen: `Hashcat -m 0 'fsd0fsdfwe09890e8f90we8f90' rockyout.txt -o solved`  -> solved tiedostosta löytyy salassana `cat solved`, voi myös laittaa tiedoston sijasta perään `--show`

Karvinen 2023: Crack File Password With John  

https://terokarvinen.com/2023/crack-file-password-with-john/  

Artikkellissa kerrotaan miten salasanoja käräkätään Password With John ohjelman avulla  

- Asennuksen alustasta tarvittavat: `$ sudo apt-get -y install micro bash-completion git build-essential libssl-dev zlib1g zlib1g-dev zlib-gst libbz2-1.0 libbz2-dev atool zip wget`
- Ladataan John The Ripper ohjelma Git-reposta `$ git clone --depth=1 https://github.com/openwall/john.git`
- Asennusta ennen pitää complile koska ohjelma kirjoitettu C:llä: ` $ cd john/src/` `$ ./configure` `$ make -s clean && make -sj4`
- jos listataan `$ cd ../run/` `$ ls -1` löytää kaikki eri formaatit mitä Johnilla voidaan kräkätä esim 'zip2john' Zip tiedostoihi
- Kräkkääminen: `$ $HOME/john/run/zip2john esimerkki.zip >esimerkki.zip.hash` -> `$ $HOME/john/run/john esimerkki.zip.hash`  

##  a) Hashcat. Asenna Hashcat ja testaa sen toimivuus ratkaisemalla tiiviste.  

Testaan tekemällä Teron artikkelin https://terokarvinen.com/2022/cracking-passwords-with-hashcat/  esimerkki.  

`sudo apt-get update`  
`sudo apt-get -y install hashid hashcat wget` _> Hashid ja Hashcat asennus  

Luodaan uusi kansio: 

`mkdir hash`  

Ladataan salasana wordlisti esim "rockyou": `wget https://github.com/danielmiessler/SecLists/raw/master/Passwords/Leaked-Databases/rockyou.txt.tar.gz` `tar xf rockyou.txt.tar.gz`  

##  

![image](https://github.com/aarott/pentest23/assets/78908566/6e53f60e-13c6-4d02-96b0-274fcc696824)  

##  

Teron artikkelissa on esimerkkinä hashid "6b1628b016dff46e6fa35684be6acc96"  -> katsotaan minkä tyyppinen se on `$ hashid -m 6b1628b016dff46e6fa35684be6acc96` 

## 

![image](https://github.com/aarott/pentest23/assets/78908566/eb9715f4-d6cf-484b-a12f-60c3e928beda)  

## 

Käytetään MD5 eli annetaan komennossa -m 0 arvoksi.  

hashcat = käytetty kräkkäy-ohjelma  
-m 0 = numero mikä saatiin hashid:stä   
'6b1628b016dff46e6fa35684be6acc96' = hashin arvo  
-o solved = tallentaa solved tiedostoksi 

`$ hashcat -m 0 '6b1628b016dff46e6fa35684be6acc96' rockyou.txt -o solved`   
`$ cat solved` näyttää salasanan joka on tässä tapauksessa "summer"  

## 

![image](https://github.com/aarott/pentest23/assets/78908566/d295f6e3-b333-4b66-83fc-045bfb8ce5d3)  


## 

Kräkkäämisessä meni n.30sekunttia, ei paha mutta huomattavasti nopeemmin olisi varmasti mennyt käyttäen näytönohjainta ilman virtuaalisointiympäristöä.  

##  c) f5bc7fcc7f5b3b6af7ff79e0feafad6d1a948b6a2c18de414993c1226be48c1f on erään tällä tehtäväsivulla olevan yksittäisen sanan tiiviste. Käytin hyvin yleistä ja tunnettua tiivistealgoritmia. Sanassa voi olla isoja kirjaimia, mutta ei erikoismerkkejä. Minkä sanan tiiviste on kyseessä?  

Tehdään täysin sama kuin äskeisessä tehtävässä.  

Selvitetään ensiksi minkä tyyppinen hashi:  

`$ hashid -m f5bc7fcc7f5b3b6af7ff79e0feafad6d1a948b6a2c18de414993c1226be48c1f`  

##  

![image](https://github.com/aarott/pentest23/assets/78908566/0f1f1114-613f-494b-9275-b0c2c5682cef)  

## 

Tehtävässä lukee "Käytin hyvin yleistä ja tunnettua tiivistealgoritmia", ainoa minkä heti tunnistan tästä listasta on SHA-256 joka on hyvin yleinen tiivistealgoritmi.  

Kokeillaan sitä eli laitetaan -m 1400 .  

`$ hashcat -m 1400 'f5bc7fcc7f5b3b6af7ff79e0feafad6d1a948b6a2c18de414993c1226be48c1f` rockyout.txt -o result`

Salasanaa ei löydy, Status "Exhausted" ("cracked" sijasta)  viittaa siihen ja `cat result` tiedostoa missä olisi kräkätty salasana ei ole luotu.  

Tehtävän ohjeessa lukee, että salasanan on tehtäväsivun sana, eli pitää varmaan tehdä oma sanakirja tähän käyttäen sanoja mitkä löytyy tehtäväsivulta.    

##

![image](https://github.com/aarott/pentest23/assets/78908566/515f3dcf-ff40-4932-998c-dc21a523d697)  

##  

Tero näytti tunnin lopussa miten salasanalistoja tehdään ja tehtäväsivun vinkeissä luki ´cewl´ myös. Se on työkalu millä voidaan URL osoitteen sanoista tehdä wordlistoja mitä salasanakräkkerit käyttää.  

https://www.geeksforgeeks.org/cewl-tool-creating-custom-wordlists-tool-in-kali-linux/  

Katsoin tästä vielä muistutukseksi miten toimii ja tein listan:  

`$ cewl https://terokarvinen.com/2023/eettinen-hakkerointi-2023/ -w teronsanat.txt` 

Cewl = työkalu millä voidaan URL osoitteen sanoista tehdä wordlistoja  
-w = wordlistan nimi  

Tässä kesti ehkä 1-2minuuttia että Cewl sai luotua sanalistan.  

Kokeilin sen jälkeen kräkätä uudella teronsanat.txt listalla aikaisempaa hashia.  

##  

![image](https://github.com/aarott/pentest23/assets/78908566/f2ff74d1-66c7-4046-9eca-ef9675fd2322)  

##


`$ hashcat -m 1400 'f5bc7fcc7f5b3b6af7ff79e0feafad6d1a948b6a2c18de414993c1226be48c1f` teronsanat.txt -o result` 

Tuloksissa lukee "Status: cracked" eli kräkkäys on onnistunut". 

## 

![image](https://github.com/aarott/pentest23/assets/78908566/f6532513-940a-4b84-9338-feaafdc96e2c)  

## 

`$ cat result`  -> salasana on "Sertificate"

![image](https://github.com/aarott/pentest23/assets/78908566/9901457d-43e1-4fa3-a2e6-f24bbc731665)  

##

