# h1 Hacker Warmup  

Kone millä tein harjoituksen:

AMD Ryzen 2600X Six-Core Processor 3.6 ghz  

16gb RAM  

Windows 10 Pro 64-bit käyttöjärjestelmä  

Oracle VM VirtualBox Manager

##

Läksy löytyy sivulta:  

https://terokarvinen.com/2023/eettinen-hakkerointi-2023/  


## x) Lue/katso ja tiivistä  


https://learning.oreilly.com/videos/the-art-of/9780135767849/9780135767849-SPTT_04_00  

Haaga-Helian tunnuksilla tämä näkyi maksutta kirjaston kautta.  

- Artikkelissa puhutaan active reconaissancesta, mikä on vaihe missä aletaan lähettämään informaatiota kohdeverkkoon. Selvitetään mitkä portit on auki ja mitkä palvelut on toiminnassa.

- Metodeja Active reconnaisencessa: Port Scanning, Web service review, Vulnerability scans (tärkeä tehdä viimeisenä)

- Portscanning: Nmap, Masscan (ei yhtä laaja kuin Nmap mutta nopeempi)

- Videolla on Nmapista ja mAsscanista demo miten ne käytännössä toimii

- Network Vulnerability scanning tools: OpenVAS, NESSUS, Nexpose, Qualys, Nmap

##

https://lockheedmartin.com/content/dam/lockheed-martin/rms/documents/cyber/LM-White-Paper-Intel-Driven-Defense.pdf

- Artikkelissa puhutaan Kill Chainista mikä on systemaattinen prosessi millä kohdistetaan vastustajaan
  tekniikoita haluttujen vaikutusten luomiseksi

Eri prosessit 'kill chainissä' järjestyksessä ovat:  

- reconnaisance: "research, identification and selsction of targets"
-  weaponization:  "coupling a remote access trojan with a an exploit into a deliverable payload"
-  delivery: "transmission of the weapon to the targeted environment"
-  exploitation: "most often exploitation targets an application or operating system vulnerability"
-  installation: "installation of a remote access trojan or backdoor on the victim system"
-  command and control (C2: "hands of access inside the target environment"
-  actions and objectives:  "taking actions to achieve original objectives"


##

Tässä vaiheessa päätin hypätä tehtävissä eteenpäin ja asentaa Kali Linuxin, koska sitä tarvitaan monissa muissa tehtävissä.  

## d) Asenna Linux virtuaalikoneeseen  


Menin https://www.kali.org/get-kali/#kali-installer-images sivustolle ja latasin uusimman version "Installer, Complete offline installation" ISO-tiedoston.  

![image](https://github.com/aarott/pentest23/assets/78908566/3d8c0680-18f9-42c2-81b6-36d106da0b7e)

##

Oracle VM Virtualboxista painetaan New ja etsitään uusi Kali iso-tiedosto.  

Hardware kohtaan kävin laittamassa 4000mb Base memory ja prosessoreita 4 CPU.  

Hard Disk kohtaan valitsin tilaa 60 GB. 

Tämän jälkeen Finish ja sitten voidaankin käynnistää uusi Kali niminen virtuaalikone.  

![image](https://github.com/aarott/pentest23/assets/78908566/da92125f-5622-410c-864c-27a47926aefd)  

Valitsin Graphical Install.  

![image](https://github.com/aarott/pentest23/assets/78908566/018239c8-751d-43b7-9fa8-859c6fa5bfaf)  


Kieleksi valitaan Englanti (US), sijainniksi Finland ja näppäimistö Finnish.  

Sen jälkeen rupesi Kali asentamaan.  

Valitaan käyttäjänimi ja salasana. (muista aina valita vahva salasana!).  

Partition disk, laitetaan Guided - use entire disk, eikä kryptata koska tämän on virtuaalikone.  

Koitan käynnistää asennuksen jälkeen Kalia mutta blackscreeniä pukkaa... 

![image](https://github.com/aarott/pentest23/assets/78908566/fe4ed103-dbfd-4ddd-b2c1-78be2fd3c099)  

Restarttasin kaiken ja ei edelleen pelkkää blackscreeniä... Asennan nyt uudestaan jos jokin menikin pieleen...

Asensin Kalin täysin samalla tavalla uudestaan, huomasin että oletuksena oli Operating System Ubuntu 64-bit, vaihdoin sen Debian 64-bit.  

Kaikki muut asetukset samalla tavalla ja nyt Kali käynnistyy onnistuneesti.  

##

![image](https://github.com/aarott/pentest23/assets/78908566/06c4c393-6ea9-4f48-bba6-00ee232be71c)

Menin terminaaliin tekemään päivitykset:

sudo apt-get update   
sudo apt-get upgrade  

Asensin myös palomuurin:

sudo apt-get install -y ufw  
sudo ufw enable

##

## a) Ratkaise Over the Wire: Bandit kolme ensimmäistä tasoa  

https://overthewire.org/wargames/bandit/  

Level0: pyydetään ottamaan SSH yhteys kyseisillä tiedoilla:  

![image](https://github.com/aarott/pentest23/assets/78908566/fd1cf770-4f68-42ae-9f4a-55841c0bcdcb)  

##

Asensin ssh:n komennolla: sudo apt-get install ssh  

Katsoin man sivulta ohjeita miten yhdistetään tiettyyn porttiin.  

Ajoin seuraavat komennot ja pääsin level 0 läpi.  


![image](https://github.com/aarott/pentest23/assets/78908566/c8bca586-ec30-4cd0-a854-d4c48138e816)  

##



![image](https://github.com/aarott/pentest23/assets/78908566/c874e9f7-476c-4242-b26c-e2327c4ce312)  

Seuraavaksi pyydettiin etsimään home kansiosta readme tiedosto mistä löytyy salasana mistä pääsee seuravalle tasolle.  


![image](https://github.com/aarott/pentest23/assets/78908566/f047bbeb-ee92-446a-ab9d-1cf315644aff)  


![image](https://github.com/aarott/pentest23/assets/78908566/d5c0d132-4b0c-407e-b72c-ad9a50f1f682)  

Seuraavaksi piti löytää seuraavan tason salasana "-" nimisestä tiedostosta. Se ei auennut cat komennolla. 

Niinpä etsin tietoa netistä ja löysin walkthroughn suoraan pelin https://jhalon.github.io/over-the-wire-bandit1/   missä kerotaan, että "." tiedoston saa auki cat ./- komennolla.


![image](https://github.com/aarott/pentest23/assets/78908566/e3e5cadb-8827-46cc-bd7b-1e442661dd4b)  

Alkuun en päässyt sisään, unohdin että ssh yhteydestä pitää aina ottaa exit ja sen jälkeen uudestaan sisään. Lopulta onnistui ja ollaan tasolla 2. 


![image](https://github.com/aarott/pentest23/assets/78908566/19a80c1f-644f-48e0-a675-2dc2cce526af)  



## b) Challenge.fi ratkaise yksi tehtävä: Where was this picture taken?  

https://2021.challenge.fi/challenges  

Where was this picture taken 172  


![image](https://github.com/aarott/pentest23/assets/78908566/03bd8c6b-8416-41e6-9398-44b10a9e04ff)  

Latasin tiedoston a.jpg - hieno kuva Eiffel-tornista.  

Tero Karvisen tehtäväsivun lopulla on vinkkinä käyttää tähän tehtävään exiftool nimistä sovellusta. Kokeillaan sovelluksen asentamista ja jos kuvan  metadatasta saisi vinkin tehtävän ratkaisuun.  

Käytin tätä sivustoa ohjeena miten exiftool asennetaan ja miten sillä luetaan meta-data kuvatiedostosta:

https://www.geeksforgeeks.org/installing-and-using-exiftool-on-linux/  

Asensin exiftoolin ja menin Downloads kansioon minne olin tallentanut a.jpg kuvan. Ajoin exiftool a.jpg komennon ja sain todella pitkän listan metadataa kyseistä tiedostosta. 


![image](https://github.com/aarott/pentest23/assets/78908566/bb45b498-2ae0-4bfc-9b11-c6adf3abe471)  

Tehtävässä pyydetään sijaintia, oletan että sen pitää olla jotain GPS-koordinaatteihin liittyvää. 

![image](https://github.com/aarott/pentest23/assets/78908566/2ad89fc8-eebc-4f1e-8ca4-e47702cca73b)  

Kokeilin kyseistä highlightattua pätkää fläginä mutta se ei toiminut.  

Kokeilin myös paria muuta GPS-koordinaattia mutta ei hyväksy ratkaisuna. Ei tämä vermaan näin helppoa pitänytkään olla.  

Enempää ei ole ideoita mitä kokeilla. Katellaan sitten tunnilla viimeistään miten edistyneemmät on tämän ratkaissut.


## c) Portswiggers labs  

https://portswigger.net/web-security/sql-injection/lab-retrieve-hidden-data  

Tehtävässä on haavoittuvuus tuotekategoriassa ja tehtävänä on paljastaa kategoria mikä paljastaa tuotteita mitä ei ole vielä julkaistu.  

Katsoin tähän tehtävään https://www.youtube.com/watch?v=X1X1UdaC_90 videon mikä kertoo step-by-step miten ongelma ratkotaan.  

Labran sivuilla kun painetaa jotakin tuotekategoriaa, voidaan osoitekentässä huomata category="joku näkyvistä kategorioista".

Tarkoitus on muuttaaa tätä kohtaa niin, että kategoria on kohta vastaa "ei mitään" tai sitten 1=1 totuutta:  

![image](https://github.com/aarott/pentest23/assets/78908566/574a2e27-5a72-4ee5-9ac2-ebf7280bacdb)  

![image](https://github.com/aarott/pentest23/assets/78908566/f2c11e93-9a2e-4097-b1f4-0d74eda98574)  

Nyt kun GIFTS kohtaa muokataa ylläolevalla lausekkeella saadaan onnistunut SLQ injektio joka ratkaisee tehtävän.  

![image](https://github.com/aarott/pentest23/assets/78908566/554983f0-e918-45be-aa63-c72b216e63e9)


## e) Porttiskannaa 1000 tavallisinta tcp-porttia omasta koneestasti (localhost)  
## f) Porttiskanna kaikki koneesi tcp-portit

Käytetään nmap sovellusta terminaalista. Katsoin man nmap sivuilta vinkkejä miten kyseiset portit skannataan.
Skannaan ekat tcp-portit 1-1000 ja sen jälkeen kaikki.  

![image](https://github.com/aarott/pentest23/assets/78908566/05bedfc8-cfda-4e83-9b10-972695373bd0)  

Tuloksista ilmenee milloin skannaus on tapahtunut, kauan hostilla on kestänyt vastata, mitkä kaikki portit on skannattu ja missä tilassa ne ovat.  

## g) Tee laaja porttiskannaus (nmap -A) koneellesi

![image](https://github.com/aarott/pentest23/assets/78908566/4da9970c-ca75-4bfd-a537-a360646c95dd)  

man nmap sivuilta voidaan lukea, että nmap -A komento antaa porttiskannauksen lisäksi kaiken muun tiedon kuten OS version, versio detectinin,  
script scanning ja tracerouten.  

![image](https://github.com/aarott/pentest23/assets/78908566/5fddb131-bdbb-45fb-a857-2dc8c880a315)  

Toistaiseksi tulokset näyttää samalta kuin aiemmissa nmap testeissä. Nyt asennetaan SSH palvelin ja katsotaan miten tulos muuttuu. 


## h) Asenna ja käynnistä jokin palvelin (ssh) ja vertaa miten porttiskannauksen tulos eroaa  

Asensin SSH-palvelimen ja käynnistin sen. Kävin tässä välissä avaamassa palomuurista SSH:lle portin komennolla 'sudo ufw allow ssh' Sen jälkeen porttiskannanasin "nmap -A localhost" ja katsoin miten tulokset eroaa. 

![image](https://github.com/aarott/pentest23/assets/78908566/146f6964-9cfd-44c9-9b5b-f4b921461dc9)  

Tuloksista saadaan selville, että portti 22/TCP on auki ja ssh käytössä. Myös OS versio ja version detection saadaan selville (Linux 2.6.x).
Yleisesti nmap -A pidetään "agressiivisena scannina" ja on paljon parempi kuin "regular scan" koska se antaa kaiken mahdollisen tiedon porttiskannauksen lisäksi kuten:  
OS detection (-O) , Version detection (-sV), Script scanning (-sC) ja TraceRoute (--traceroute).  

https://www.codecademy.com/resources/docs/cybersecurity/nmap/aggressive-scan

##  i)  

Esittelen avointen lähteiden tiedusteluun sopivan nettisivun. Tehtävänannossa on esimerkkinä Bazzel: IntelTechniques: Tools  
https://inteltechniques.com/tools/index.html

Sivuston oikeesta kulmasta voi valita erilaisia työkaluja mistä voi hakukoneilla etsiä tietoa. Valitsen täältä Domains ja päätän  
etsiä tietoa edellisellä Linux Palvelimet kurssilla vuokraamastani domainista.  

![image](https://github.com/aarott/pentest23/assets/78908566/a9fac55c-bcbf-4d1a-ba64-69429f7129cf)  

Seuraavaan näkymään kirjoitan Populate All, jonka jälkeen kokeilen WHois sivustoa työkaluna ja katson mitä tietoja se antaa.  

![image](https://github.com/aarott/pentest23/assets/78908566/54a70224-6fcd-435c-98f7-69e9cd6003d9)  


![image](https://github.com/aarott/pentest23/assets/78908566/33164913-0bae-4a99-bc93-8b744b2592f3)  

Löytyy tietoja esim mistä ja milloin Domain Name on rekisteröity. Milloin sitä on päivitetty jne.  

## Lähteet  

https://terokarvinen.com/2023/eettinen-hakkerointi-2023/ 

https://learning.oreilly.com/videos/the-art-of/9780135767849/9780135767849-SPTT_04_00    

https://lockheedmartin.com/content/dam/lockheed-martin/rms/documents/cyber/LM-White-Paper-Intel-Driven-Defense.pdf  

https://www.kali.org/get-kali/#kali-installer-images

https://overthewire.org/wargames/bandit/ 

https://jhalon.github.io/over-the-wire-bandit1/

https://inteltechniques.com/tools/index.html

https://www.codecademy.com/resources/docs/cybersecurity/nmap/aggressive-scan  

https://2021.challenge.fi/challenges  









